const f=new Map,c=new WeakMap,d=(e,o)=>{f.set(e.toLowerCase(),o)};function h(e,o){const t=e.dataset.props?JSON.parse(e.dataset.props):{},n={};return e.querySelectorAll("template[data-slot]").forEach(a=>{n[a.dataset.slot]=a.innerHTML}),o(e,t,n)||(()=>{})}function y(){const e=new MutationObserver(m);e.observe(document.body,{childList:!0,subtree:!0});const o=[];return document.querySelectorAll("[data-component]").forEach(t=>{p(t,o)}),()=>{e.disconnect(),o.forEach(t=>t())}}function m(e){for(const o of e)o.type==="childList"&&(o.addedNodes.forEach(t=>{var n,r;t instanceof HTMLElement&&(t.matches&&t.matches("[data-component]")&&p(t),(r=(n=t.querySelectorAll)==null?void 0:n.call(t,"[data-component]"))==null||r.forEach(a=>{p(a)}))}),o.removedNodes.forEach(t=>{var n,r;t instanceof HTMLElement&&(l(t),(r=(n=t.querySelectorAll)==null?void 0:n.call(t,"[data-component]"))==null||r.forEach(a=>{l(a)}))}))}function p(e,o){var u;const t=(u=e.dataset.component)==null?void 0:u.toLowerCase();if(!t||c.has(e))return;const n=f.get(t);if(!n){console.warn(`[DCE] Component "${t}" is not defined. Did you forget to import and define it?`);return}let r={};try{e.dataset.props&&(r=JSON.parse(e.dataset.props))}catch(s){console.error(`[DCE] Failed to parse props for component "${t}". Invalid JSON.`,{element:e,error:s})}const a={};e.querySelectorAll("template[data-slot]").forEach(s=>{a[s.dataset.slot]=s.innerHTML});const i=n(e,r,a);i&&(c.set(e,i),o&&o.push(i))}function l(e){const o=c.get(e);if(o)try{o()}finally{c.delete(e)}}export{d as define,h as mount,y as mountAll};
