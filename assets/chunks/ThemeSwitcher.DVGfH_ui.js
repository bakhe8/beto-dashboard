var g=Object.defineProperty;var p=(n,e,o)=>e in n?g(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o;var m=(n,e,o)=>p(n,typeof e!="symbol"?e+"":e,o);import{define as w}from"./runtime.gEiicSNP.js";import{s as u}from"./store.FDtkuwoP.js";import{s as y}from"./dom.Bppo_qQO.js";import{BaseComponent as x}from"./BaseComponent.CGITZmRy.js";class A extends x{constructor(o){super(o);m(this,"initialized",!1);m(this,"unsubscribe",null);this.on("click","button[role=radio]",(t,a)=>{const h=a,i=(h.textContent||"").trim().toLowerCase(),r=h.dataset.theme||i;(r==="light"||r==="dark"||r==="auto")&&u.set("theme",r)});const b=t=>{const a=this.root.querySelector(".theme-switcher");if(!a)return;const h=Array.from(a.querySelectorAll("button[role=radio]"));if(h.length===0)return;const i=u.get("theme"),s=["light","dark","auto"],r=s.indexOf(i);let c=r;if(t.key==="ArrowRight"||t.key==="ArrowDown")t.preventDefault(),c=(r+1)%s.length;else if(t.key==="ArrowLeft"||t.key==="ArrowUp")t.preventDefault(),c=(r-1+s.length)%s.length;else return;const d=s[c];u.set("theme",d);const l=h.find(k=>k.getAttribute("data-theme")===d);l==null||l.focus()};this.root.addEventListener("keydown",b),this.effect(()=>()=>this.root.removeEventListener("keydown",b));const f=()=>{const t=u.get("theme");if(!this.initialized){y(this.root,`
          <div class="theme-switcher" role="radiogroup" aria-label="Theme">
            <button role="radio" data-theme="light" aria-checked="${t==="light"}" tabindex="${t==="light"?0:-1}">Light</button>
            <button role="radio" data-theme="dark" aria-checked="${t==="dark"}" tabindex="${t==="dark"?0:-1}">Dark</button>
            <button role="radio" data-theme="auto" aria-checked="${t==="auto"}" tabindex="${t==="auto"?0:-1}">Auto</button>
          </div>
        `),this.initialized=!0;return}const a={light:"light",dark:"dark",auto:"auto"};this.root.querySelectorAll("button[role=radio]").forEach(i=>{var d;const s=i.dataset.theme||((d=i.textContent)==null?void 0:d.trim().toLowerCase())||"",c=a[s]===t;i.setAttribute("aria-checked",String(c)),i.setAttribute("tabindex",c?"0":"-1")})};this.unsubscribe=u.on("theme",f),f()}destroy(){var o;super.destroy(),(o=this.unsubscribe)==null||o.call(this)}}const v=n=>{const e=new A(n);return()=>e.destroy()};w("ThemeSwitcher",v);export{v as ThemeSwitcher};
