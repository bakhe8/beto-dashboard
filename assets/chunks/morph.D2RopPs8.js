var p=Object.defineProperty;var C=(r,e,c)=>e in r?p(r,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[e]=c;var o=(r,e,c)=>C(r,typeof e!="symbol"?e+"":e,c);import{BaseComponent as K}from"./BaseComponent.CGITZmRy.js";import{s as f}from"./store.FDtkuwoP.js";import{s as M}from"./dom.Bppo_qQO.js";const j={create(r,e){class c extends K{constructor(s,n,m){super(s);o(this,"unsubscribers",[]);o(this,"ctx");const u={};if(e.stateKeys){for(const t of e.stateKeys)u[t]=f.get(t);this.unsubscribers=e.stateKeys.map(t=>f.on(t,h=>{this.ctx.state[t]=h,this.render()}))}if(this.ctx={root:s,props:n,slots:m,state:u},e.events)for(const[t,h]of Object.entries(e.events)){const d=t.includes(":"),[b,x]=d?t.split(":",2):["click",t];this.on(b,x,(y,l)=>h(y,l,this.ctx))}this.render()}render(){var n;const s=e.render(this.ctx);M(this.ctx.root,s),(n=e.afterRender)==null||n.call(e,this.ctx)}destroy(){super.destroy(),this.unsubscribers.forEach(s=>s()),this.unsubscribers=[]}}return function(a,i,s){const n=new c(a,i,s);return()=>n.destroy()}}};export{j as C};
